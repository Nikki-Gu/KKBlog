import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,o as a,d as i}from"./app-D5166FK3.js";const o={},l=i('<h2 id="锁" tabindex="-1"><a class="header-anchor" href="#锁"><span>锁</span></a></h2><p>三种锁：全局锁、表级锁、行级锁</p><h3 id="全局锁" tabindex="-1"><a class="header-anchor" href="#全局锁"><span>全局锁</span></a></h3><p>全局锁主要应用于做<strong>全库逻辑备份</strong></p><p>会影响业务正常进行，解决方法：如果数据库的引擎支持的事务支持<strong>可重复读的隔离级别</strong>，那么在备份数据库之前先开启事务，会先创建 Read View，然后整个事务执行期间都在用这个 Read View，而且由于 MVCC 的支持，备份期间业务依然可以对数据进行更新操作。</p><h3 id="表级锁" tabindex="-1"><a class="header-anchor" href="#表级锁"><span>表级锁</span></a></h3><p>MySQL 里面表级别的锁有这几种：</p><ul><li>表锁：<code>lock tables t_student read/write;</code><ul><li>会限制本线程和其他线程的读写</li></ul></li><li>元数据锁（MDL）： <ul><li>不需要显示使用，对数据库表进行操作时，会自动给这个表加上元数据锁，在事务提交后才会释放</li><li>作用：当用户对表执行 CRUD 操作时，防止其他线程对这个表结构做变更</li><li>对一张表进行 CRUD 操作时，加 <strong>MDL 读锁</strong>；</li><li>对一张表做结构变更操作的时候，加 <strong>MDL 写锁</strong>；</li></ul></li><li>意向锁：用于快速判断表里是否有记录被加锁（不理解） <ul><li>意向锁之间相互兼容，和读写锁之间只有IS锁和S锁兼容？？</li></ul></li><li>AUTO-INC 锁：表级别锁，在插入数据时加锁，执行完插入语句后立即释放； <ul><li>作用：阻塞其他插入语句，保证插入数据时，被 <code>AUTO_INCREMENT</code> 修饰的字段的值是连续递增的。</li><li>三种实现（TODO）</li></ul></li></ul>',8),r=[l];function n(c,s){return a(),t("div",null,r)}const h=e(o,[["render",n],["__file","锁.html.vue"]]),m=JSON.parse(`{"path":"/backend/database/%E9%94%81.html","title":"锁","lang":"zh-CN","frontmatter":{"title":"锁","order":3,"copyright":"<a href=\\"https://creativecommons.org/licenses/by-nc/4.0/\\">CC BY-NC 4.0协议</a>","description":"锁 三种锁：全局锁、表级锁、行级锁 全局锁 全局锁主要应用于做全库逻辑备份 会影响业务正常进行，解决方法：如果数据库的引擎支持的事务支持可重复读的隔离级别，那么在备份数据库之前先开启事务，会先创建 Read View，然后整个事务执行期间都在用这个 Read View，而且由于 MVCC 的支持，备份期间业务依然可以对数据进行更新操作。 表级锁 MyS...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/KKBlog/backend/database/%E9%94%81.html"}],["meta",{"property":"og:site_name","content":"KK's Blog"}],["meta",{"property":"og:title","content":"锁"}],["meta",{"property":"og:description","content":"锁 三种锁：全局锁、表级锁、行级锁 全局锁 全局锁主要应用于做全库逻辑备份 会影响业务正常进行，解决方法：如果数据库的引擎支持的事务支持可重复读的隔离级别，那么在备份数据库之前先开启事务，会先创建 Read View，然后整个事务执行期间都在用这个 Read View，而且由于 MVCC 的支持，备份期间业务依然可以对数据进行更新操作。 表级锁 MyS..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-14T07:00:16.000Z"}],["meta",{"property":"article:author","content":"KK"}],["meta",{"property":"article:modified_time","content":"2024-05-14T07:00:16.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"锁\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-14T07:00:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KK\\",\\"url\\":\\"https://github.com/Nikki-Gu\\"}]}"]]},"headers":[{"level":2,"title":"锁","slug":"锁","link":"#锁","children":[{"level":3,"title":"全局锁","slug":"全局锁","link":"#全局锁","children":[]},{"level":3,"title":"表级锁","slug":"表级锁","link":"#表级锁","children":[]}]}],"git":{"createdTime":1715670016000,"updatedTime":1715670016000,"contributors":[{"name":"Nikki-Gu","email":"394632208@qq.com","commits":1}]},"readingTime":{"minutes":1.33,"words":400},"filePathRelative":"backend/database/锁.md","localizedDate":"2024年5月14日","autoDesc":true}`);export{h as comp,m as data};
